<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cart – Decent Kids Wear</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    :root{
      --pink:#f472b6;--pink-light:#fce7f3;--pink-mid:#fbcfe8;--pink-dark:#db2777;
      --black:#111111;--gray:#6b7280;--gray-light:#f9fafb;--white:#ffffff;
      --shadow:0 4px 24px rgba(244,114,182,0.13);
    }
    body{font-family:'Poppins',sans-serif;background:var(--gray-light);color:var(--black)}

    /* NAVBAR */
    .navbar-main{background:var(--white);border-bottom:1.5px solid var(--pink-mid);position:sticky;top:0;z-index:200;box-shadow:0 2px 12px rgba(244,114,182,0.08)}
    .navbar-inner{display:flex;align-items:center;justify-content:space-between;padding:14px 24px;max-width:1200px;margin:0 auto}
    .nav-logo{font-size:1.2rem;font-weight:800;color:var(--black);text-decoration:none;display:flex;align-items:center;gap:8px}
    .nav-logo span{color:var(--pink)}
    .nav-logo svg{width:22px;height:22px;flex-shrink:0}
    .nav-right{display:flex;align-items:center;gap:10px}
    .nav-link-btn{display:flex;align-items:center;gap:6px;padding:8px 14px;background:none;border:none;font-family:'Poppins',sans-serif;font-size:0.85rem;font-weight:600;color:var(--gray);cursor:pointer;border-radius:8px;transition:all 0.2s;text-decoration:none}
    .nav-link-btn:hover{background:var(--pink-light);color:var(--pink-dark)}
    .nav-link-btn svg{width:16px;height:16px}
    .profile-btn{width:36px;height:36px;border-radius:50%;background:var(--pink-light);border:2px solid var(--pink-mid);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:0.82rem;font-weight:700;color:var(--pink-dark);text-decoration:none;transition:all 0.2s;flex-shrink:0}
    .profile-btn:hover{background:var(--pink-mid);color:var(--pink-dark)}

    /* PAGE HEADER */
    .page-header{background:linear-gradient(135deg,var(--white) 60%,var(--pink-light) 100%);border-bottom:1.5px solid var(--pink-mid);padding:28px 24px}
    .page-header-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px}
    .page-title{font-size:1.6rem;font-weight:800;color:var(--black)}
    .page-title span{color:var(--pink)}
    .cart-steps{display:flex;align-items:center;gap:8px}
    .step{display:flex;align-items:center;gap:6px;font-size:0.8rem;font-weight:600}
    .step-num{width:26px;height:26px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:0.75rem;font-weight:700}
    .step.done .step-num{background:var(--pink);color:var(--white)}
    .step.active .step-num{background:var(--pink-dark);color:var(--white)}
    .step.pending .step-num{background:#e5e7eb;color:var(--gray)}
    .step.done span,.step.active span{color:var(--black)}
    .step.pending span{color:var(--gray)}
    .step-line{width:28px;height:2px;background:var(--pink-mid);border-radius:2px}
    .step-line.done{background:var(--pink)}

    /* LAYOUT */
    .cart-layout{max-width:1200px;margin:0 auto;padding:28px 24px;display:flex;gap:24px;align-items:flex-start}

    /* CART ITEMS */
    .cart-main{flex:1;min-width:0}
    .section-card{background:var(--white);border:1.5px solid var(--pink-mid);border-radius:18px;padding:24px;box-shadow:var(--shadow);margin-bottom:20px}
    .section-card-title{font-size:1rem;font-weight:700;color:var(--black);margin-bottom:18px;display:flex;align-items:center;gap:8px}
    .section-card-title svg{width:18px;height:18px;color:var(--pink-dark)}

    /* CART ITEM ROW */
    .cart-item{display:flex;gap:14px;padding:16px 0;border-bottom:1px solid #f3f4f6;align-items:flex-start}
    .cart-item:last-child{border-bottom:none;padding-bottom:0}
    .cart-item:first-child{padding-top:0}
    .cart-item-img{width:80px;height:80px;border-radius:12px;object-fit:cover;border:1.5px solid var(--pink-mid);flex-shrink:0}
    .cart-item-no-img{width:80px;height:80px;border-radius:12px;background:var(--pink-light);border:1.5px solid var(--pink-mid);display:flex;align-items:center;justify-content:center;flex-shrink:0}
    .cart-item-no-img svg{width:28px;height:28px;color:var(--pink-dark);opacity:0.5}
    .cart-item-info{flex:1;min-width:0}
    .cart-item-cat{font-size:0.7rem;font-weight:600;color:var(--pink-dark);background:var(--pink-light);padding:2px 8px;border-radius:50px;display:inline-block;margin-bottom:5px}
    .cart-item-name{font-size:0.95rem;font-weight:700;color:var(--black);margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .cart-item-meta{font-size:0.78rem;color:var(--gray);margin-bottom:10px}
    .qty-control{display:flex;align-items:center;gap:8px}
    .qty-btn{width:30px;height:30px;border-radius:8px;border:1.5px solid var(--pink-mid);background:var(--white);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;font-size:1rem;color:var(--black)}
    .qty-btn:hover{background:var(--pink-light);border-color:var(--pink);color:var(--pink-dark)}
    .qty-btn svg{width:14px;height:14px}
    .qty-num{font-size:0.9rem;font-weight:700;color:var(--black);min-width:24px;text-align:center}
    .cart-item-right{display:flex;flex-direction:column;align-items:flex-end;gap:10px;flex-shrink:0}
    .cart-item-price{font-size:1.05rem;font-weight:800;color:var(--black)}
    .cart-item-total{font-size:0.78rem;color:var(--gray)}
    .btn-remove{display:flex;align-items:center;gap:4px;padding:5px 10px;background:#fff1f2;color:#be123c;border:1px solid #fecdd3;border-radius:7px;font-family:'Poppins',sans-serif;font-size:0.75rem;font-weight:600;cursor:pointer;transition:all 0.2s}
    .btn-remove:hover{background:#ffe4e6}
    .btn-remove svg{width:12px;height:12px}

    /* EMPTY CART */
    .empty-cart{text-align:center;padding:60px 20px}
    .empty-cart svg{width:64px;height:64px;color:var(--pink-dark);opacity:0.25;margin-bottom:16px}
    .empty-cart h3{font-size:1.1rem;font-weight:700;margin-bottom:8px}
    .empty-cart p{font-size:0.87rem;color:var(--gray);margin-bottom:24px}
    .btn-shop{display:inline-flex;align-items:center;gap:7px;padding:12px 24px;background:var(--pink);color:var(--white);border:none;border-radius:10px;font-family:'Poppins',sans-serif;font-size:0.92rem;font-weight:600;cursor:pointer;transition:all 0.2s;text-decoration:none;box-shadow:0 4px 14px rgba(244,114,182,0.28)}
    .btn-shop:hover{background:var(--pink-dark);color:var(--white);transform:translateY(-1px)}
    .btn-shop svg{width:16px;height:16px}

    /* ORDER SUMMARY */
    .order-summary{width:320px;flex-shrink:0;position:sticky;top:90px}
    .summary-row{display:flex;justify-content:space-between;align-items:center;padding:9px 0;font-size:0.87rem;border-bottom:1px solid #f3f4f6}
    .summary-row:last-of-type{border-bottom:none}
    .summary-row.total{font-size:1.05rem;font-weight:800;color:var(--black);border-top:2px solid var(--pink-mid);padding-top:14px;margin-top:4px}
    .summary-row.total span:last-child{color:var(--pink-dark)}
    .summary-savings{background:#f0fdf4;border:1px solid #bbf7d0;border-radius:8px;padding:10px 14px;margin:12px 0;font-size:0.82rem;color:#166534;font-weight:600;display:none}
    .summary-savings svg{width:14px;height:14px;margin-right:5px;vertical-align:-2px}
    .btn-checkout{width:100%;padding:14px;background:var(--pink);color:var(--white);border:none;border-radius:12px;font-family:'Poppins',sans-serif;font-size:1rem;font-weight:700;cursor:pointer;transition:all 0.2s;box-shadow:0 4px 18px rgba(244,114,182,0.3);display:flex;align-items:center;justify-content:center;gap:8px;margin-top:16px}
    .btn-checkout:hover{background:var(--pink-dark);transform:translateY(-1px)}
    .btn-checkout svg{width:18px;height:18px}
    .btn-continue{width:100%;padding:11px;background:var(--white);color:var(--pink-dark);border:1.5px solid var(--pink);border-radius:12px;font-family:'Poppins',sans-serif;font-size:0.9rem;font-weight:600;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:7px;margin-top:10px;text-decoration:none}
    .btn-continue:hover{background:var(--pink-light)}
    .btn-continue svg{width:15px;height:15px}
    .secure-badge{display:flex;align-items:center;justify-content:center;gap:6px;font-size:0.75rem;color:var(--gray);margin-top:12px}
    .secure-badge svg{width:13px;height:13px;color:var(--pink-dark)}

    /* COUPON */
    .coupon-row{display:flex;gap:8px;margin-top:14px}
    .coupon-input{flex:1;padding:9px 12px;border:1.5px solid #e5e7eb;border-radius:8px;font-family:'Poppins',sans-serif;font-size:0.83rem;outline:none;transition:border-color 0.2s}
    .coupon-input:focus{border-color:var(--pink)}
    .btn-apply{padding:9px 16px;background:var(--pink-light);color:var(--pink-dark);border:1.5px solid var(--pink-mid);border-radius:8px;font-family:'Poppins',sans-serif;font-size:0.83rem;font-weight:600;cursor:pointer;transition:all 0.2s;white-space:nowrap}
    .btn-apply:hover{background:var(--pink-mid)}

    /* ORDER CONFIRM MODAL */
    .modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.5);z-index:500;align-items:center;justify-content:center}
    .modal-overlay.open{display:flex}
    .modal-box{background:var(--white);border-radius:22px;padding:36px;max-width:480px;width:90%;box-shadow:0 20px 60px rgba(0,0,0,0.2);animation:popIn 0.3s ease}
    @keyframes popIn{from{transform:scale(0.85);opacity:0}to{transform:scale(1);opacity:1}}
    .modal-icon{width:64px;height:64px;background:var(--pink-light);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 16px}
    .modal-icon svg{width:30px;height:30px;color:var(--pink-dark)}
    .modal-title{font-size:1.2rem;font-weight:800;text-align:center;margin-bottom:6px}
    .modal-sub{font-size:0.85rem;color:var(--gray);text-align:center;margin-bottom:22px;line-height:1.6}
    .order-detail-row{display:flex;justify-content:space-between;font-size:0.83rem;padding:7px 0;border-bottom:1px solid #f3f4f6}
    .order-detail-row:last-of-type{border-bottom:none}
    .order-detail-row strong{color:var(--black)}
    .modal-actions{display:flex;gap:10px;margin-top:22px}
    .btn-modal-confirm{flex:1;padding:13px;background:var(--pink);color:var(--white);border:none;border-radius:10px;font-family:'Poppins',sans-serif;font-size:0.93rem;font-weight:700;cursor:pointer;transition:all 0.2s}
    .btn-modal-confirm:hover{background:var(--pink-dark)}
    .btn-modal-cancel{flex:1;padding:13px;background:var(--white);color:var(--gray);border:1.5px solid #e5e7eb;border-radius:10px;font-family:'Poppins',sans-serif;font-size:0.93rem;font-weight:600;cursor:pointer;transition:all 0.2s}
    .btn-modal-cancel:hover{background:var(--gray-light)}

    /* SUCCESS MODAL */
    .success-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.55);z-index:600;align-items:center;justify-content:center}
    .success-overlay.open{display:flex}
    .success-box{background:var(--white);border-radius:22px;padding:40px;max-width:420px;width:90%;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,0.2);animation:popIn 0.3s ease}
    .success-icon{width:72px;height:72px;background:#f0fdf4;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 18px;border:2px solid #bbf7d0}
    .success-icon svg{width:34px;height:34px;color:#16a34a}
    .success-title{font-size:1.3rem;font-weight:800;color:var(--black);margin-bottom:8px}
    .success-sub{font-size:0.87rem;color:var(--gray);line-height:1.6;margin-bottom:10px}
    .order-id-badge{display:inline-block;background:var(--pink-light);color:var(--pink-dark);font-size:0.83rem;font-weight:700;padding:6px 16px;border-radius:50px;border:1px solid var(--pink-mid);margin-bottom:22px}
    .btn-success-profile{display:inline-flex;align-items:center;gap:7px;padding:12px 24px;background:var(--pink);color:var(--white);border:none;border-radius:10px;font-family:'Poppins',sans-serif;font-size:0.92rem;font-weight:700;cursor:pointer;transition:all 0.2s;text-decoration:none;margin-right:8px}
    .btn-success-profile:hover{background:var(--pink-dark);color:var(--white)}
    .btn-success-shop{display:inline-flex;align-items:center;gap:7px;padding:12px 20px;background:var(--white);color:var(--pink-dark);border:1.5px solid var(--pink);border-radius:10px;font-family:'Poppins',sans-serif;font-size:0.88rem;font-weight:600;cursor:pointer;transition:all 0.2s;text-decoration:none}
    .btn-success-shop:hover{background:var(--pink-light)}

    /* TOAST */
    .toast-wrap{position:fixed;bottom:24px;right:24px;z-index:9999;display:flex;flex-direction:column;gap:8px}
    .toast-item{background:var(--black);color:var(--white);padding:11px 18px;border-radius:10px;font-size:0.83rem;font-weight:500;display:flex;align-items:center;gap:8px;box-shadow:0 4px 18px rgba(0,0,0,0.2);animation:slideIn 0.3s ease;min-width:200px}
    .toast-item svg{width:14px;height:14px;color:var(--pink);flex-shrink:0}
    @keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}

    /* FOOTER */
    .footer-strip{background:var(--black);color:#9ca3af;text-align:center;padding:22px;font-size:0.8rem;margin-top:40px}
    .footer-strip strong{color:var(--pink)}

    @media(max-width:900px){
      .order-summary{width:100%;position:static}
      .cart-layout{flex-direction:column;padding:16px}
    }
    @media(max-width:576px){
      .cart-steps{display:none}
      .cart-item-img,.cart-item-no-img{width:64px;height:64px}
      .cart-item-name{font-size:0.88rem}
    }
  </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar-main">
  <div class="navbar-inner">
    <a class="nav-logo" href="customer.html">
      <svg viewBox="0 0 24 24" fill="none" stroke="#f472b6" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
      Decent <span>Kids Wear</span>
    </a>
    <div class="nav-right">
      <a class="nav-link-btn" href="products.html">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
        Products
      </a>
      <a class="profile-btn" href="profile.html" id="profileBtn" title="My Profile">
        <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      </a>
    </div>
  </div>
</nav>

<!-- TOAST -->
<div class="toast-wrap" id="toastWrap"></div>

<!-- ORDER CONFIRM MODAL -->
<div class="modal-overlay" id="confirmModal">
  <div class="modal-box">
    <div class="modal-icon">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
    </div>
    <div class="modal-title">Confirm Your Order</div>
    <div class="modal-sub">Please review your order details before placing</div>
    <div id="orderSummaryDetails"></div>
    <div class="modal-actions">
      <button class="btn-modal-cancel" onclick="closeConfirmModal()">Go Back</button>
      <button class="btn-modal-confirm" onclick="placeOrder()">Place Order</button>
    </div>
  </div>
</div>

<!-- SUCCESS MODAL -->
<div class="success-overlay" id="successModal">
  <div class="success-box">
    <div class="success-icon">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
    </div>
    <div class="success-title">Order Placed!</div>
    <p class="success-sub">Your order has been placed successfully. We will contact you shortly for delivery details.</p>
    <div class="order-id-badge" id="successOrderId">Order #DKW000000</div>
    <div style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center">
      <a class="btn-success-profile" href="profile.html">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        View Orders
      </a>
      <a class="btn-success-shop" href="products.html">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
        Shop More
      </a>
    </div>
  </div>
</div>

<!-- PAGE HEADER -->
<div class="page-header">
  <div class="page-header-inner">
    <h1 class="page-title">My <span>Cart</span></h1>
    <div class="cart-steps">
      <div class="step active">
        <div class="step-num">1</div>
        <span>Cart</span>
      </div>
      <div class="step-line"></div>
      <div class="step pending">
        <div class="step-num">2</div>
        <span>Review</span>
      </div>
      <div class="step-line"></div>
      <div class="step pending">
        <div class="step-num">3</div>
        <span>Done</span>
      </div>
    </div>
  </div>
</div>

<!-- CART LAYOUT -->
<div class="cart-layout">

  <!-- CART ITEMS -->
  <div class="cart-main">
    <div class="section-card" id="cartItemsCard">
      <div class="section-card-title">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
        Cart Items <span id="itemCountBadge" style="margin-left:6px;background:var(--pink);color:var(--white);font-size:0.72rem;padding:2px 8px;border-radius:50px;font-weight:700">0</span>
      </div>
      <div id="cartItemsList"></div>
    </div>

    <!-- YOU MAY ALSO LIKE -->
    <div class="section-card" id="suggestedCard" style="display:none">
      <div class="section-card-title">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
        You May Also Like
      </div>
      <div id="suggestedGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px"></div>
    </div>
  </div>

  <!-- ORDER SUMMARY -->
  <div class="order-summary">
    <div class="section-card">
      <div class="section-card-title">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
        Order Summary
      </div>

      <div class="summary-row">
        <span>Subtotal (<span id="sumItemCount">0</span> items)</span>
        <span id="sumSubtotal">₹0</span>
      </div>
      <div class="summary-row">
        <span>Delivery</span>
        <span id="sumDelivery" style="color:#166534;font-weight:600">Free</span>
      </div>
      <div class="summary-row" id="discountRow" style="display:none">
        <span>Discount</span>
        <span id="sumDiscount" style="color:#db2777;font-weight:600">-₹0</span>
      </div>
      <div class="summary-row total">
        <span>Total</span>
        <span id="sumTotal">₹0</span>
      </div>

      <div class="summary-savings" id="savingsBox">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
        You save <span id="savingsAmt"></span> on this order!
      </div>

      <!-- Coupon -->
      <div style="margin-top:14px;padding-top:14px;border-top:1px solid #f3f4f6">
        <div style="font-size:0.8rem;font-weight:600;color:var(--black);margin-bottom:8px;display:flex;align-items:center;gap:6px">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#db2777" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
          Have a coupon?
        </div>
        <div class="coupon-row">
          <input class="coupon-input" type="text" id="couponInput" placeholder="Enter code"/>
          <button class="btn-apply" onclick="applyCoupon()">Apply</button>
        </div>
        <div id="couponMsg" style="font-size:0.75rem;margin-top:5px;display:none"></div>
      </div>

      <button class="btn-checkout" id="checkoutBtn" onclick="openConfirmModal()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
        Proceed to Order
      </button>
      <a class="btn-continue" href="products.html">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
        Continue Shopping
      </a>
      <div class="secure-badge">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        Secure checkout
      </div>
    </div>

    <!-- DELIVERY INFO -->
    <div class="section-card" style="margin-top:0">
      <div class="section-card-title">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h4l3 5v3h-7V8z"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
        Delivery Info
      </div>
      <div style="font-size:0.82rem;color:var(--gray);line-height:1.7">
        <div style="display:flex;align-items:flex-start;gap:7px;margin-bottom:8px">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#db2777" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink:0;margin-top:2px"><polyline points="20 6 9 17 4 12"/></svg>
          Free delivery on orders above ₹499
        </div>
        <div style="display:flex;align-items:flex-start;gap:7px;margin-bottom:8px">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#db2777" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink:0;margin-top:2px"><polyline points="20 6 9 17 4 12"/></svg>
          Delivery within 3–5 business days
        </div>
        <div style="display:flex;align-items:flex-start;gap:7px">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#db2777" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink:0;margin-top:2px"><polyline points="20 6 9 17 4 12"/></svg>
          7-day easy return policy
        </div>
      </div>
    </div>
  </div>
</div>

<!-- FOOTER -->
<div class="footer-strip">
  &copy; 2026 <strong>Decent Kids Wear</strong>. All Rights Reserved. &nbsp;|&nbsp; Project by <strong>Mahek Shaikh</strong> &amp; <strong>Sakshi Gaikwad</strong>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// ── Auth Guard ──
if(!localStorage.getItem('dkw_loggedCustomer')) window.location.href='index.html';

// ── Helpers ──
function getCart(){ return JSON.parse(localStorage.getItem('dkw_cart')||'[]'); }
function saveCart(c){ localStorage.setItem('dkw_cart',JSON.stringify(c)); }
function getProducts(){ return JSON.parse(localStorage.getItem('dkw_products')||'[]'); }
function getOrders(){ return JSON.parse(localStorage.getItem('dkw_orders')||'[]'); }
function saveOrders(o){ localStorage.setItem('dkw_orders',JSON.stringify(o)); }
function getUser(){ return JSON.parse(localStorage.getItem('dkw_loggedCustomer')||'{}'); }

function showToast(msg,type='success'){
  const wrap=document.getElementById('toastWrap');
  const t=document.createElement('div'); t.className='toast-item';
  const icon=type==='error'
    ?'<path d="M18 6L6 18M6 6l12 12"/>'
    :'<polyline points="20 6 9 17 4 12"/>';
  t.innerHTML=`<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">${icon}</svg>${msg}`;
  wrap.appendChild(t); setTimeout(()=>t.remove(),3000);
}

// ── Coupon State ──
let couponDiscount=0;
let couponCode='';
const COUPONS={'KIDS10':10,'DECENT15':15,'MAHEK20':20,'WELCOME10':10};

// ── Render Cart ──
function renderCart(){
  const cart=getCart();
  const list=document.getElementById('cartItemsList');
  const badge=document.getElementById('itemCountBadge');
  badge.textContent=cart.reduce((s,i)=>s+i.qty,0);

  if(cart.length===0){
    list.innerHTML=`<div class="empty-cart">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
      <h3>Your cart is empty</h3>
      <p>Looks like you haven't added anything yet!</p>
      <a class="btn-shop" href="products.html">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
        Browse Products
      </a>
    </div>`;
    document.getElementById('checkoutBtn').disabled=true;
    document.getElementById('checkoutBtn').style.opacity='0.5';
    document.getElementById('checkoutBtn').style.cursor='not-allowed';
    updateSummary(0,0);
    loadSuggested();
    return;
  }

  document.getElementById('checkoutBtn').disabled=false;
  document.getElementById('checkoutBtn').style.opacity='1';
  document.getElementById('checkoutBtn').style.cursor='pointer';

  list.innerHTML=cart.map(item=>`
    <div class="cart-item" id="item-${item.id}">
      ${item.image
        ?`<img class="cart-item-img" src="${item.image}" alt="${item.name}"/>`
        :`<div class="cart-item-no-img"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg></div>`}
      <div class="cart-item-info">
        <span class="cart-item-cat">${item.category}</span>
        <div class="cart-item-name">${item.name}</div>
        <div class="cart-item-meta">${item.sizes?'Sizes: '+item.sizes:''}</div>
        <div class="qty-control">
          <button class="qty-btn" onclick="changeQty('${item.id}',-1)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/></svg>
          </button>
          <span class="qty-num">${item.qty}</span>
          <button class="qty-btn" onclick="changeQty('${item.id}',1)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
          </button>
        </div>
      </div>
      <div class="cart-item-right">
        <div class="cart-item-price">₹${item.price}</div>
        <div class="cart-item-total">Total: ₹${(item.price*item.qty).toLocaleString('en-IN')}</div>
        <button class="btn-remove" onclick="removeItem('${item.id}')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/><path d="M10 11v6"/><path d="M14 11v6"/></svg>
          Remove
        </button>
      </div>
    </div>
  `).join('');

  const subtotal=cart.reduce((s,i)=>s+(i.price*i.qty),0);
  updateSummary(subtotal, cart.reduce((s,i)=>s+i.qty,0));
  loadSuggested();
}

// ── Update Summary ──
function updateSummary(subtotal, count){
  const delivery=subtotal>0&&subtotal<499?49:0;
  const discAmt=couponDiscount>0?Math.round(subtotal*couponDiscount/100):0;
  const total=subtotal+delivery-discAmt;
  document.getElementById('sumItemCount').textContent=count;
  document.getElementById('sumSubtotal').textContent='₹'+subtotal.toLocaleString('en-IN');
  document.getElementById('sumDelivery').textContent=delivery===0?(subtotal===0?'—':'Free'):'₹'+delivery;
  document.getElementById('sumDelivery').style.color=delivery===0?'#166534':var_black;
  document.getElementById('sumTotal').textContent='₹'+total.toLocaleString('en-IN');
  const discRow=document.getElementById('discountRow');
  if(discAmt>0){
    discRow.style.display='flex';
    document.getElementById('sumDiscount').textContent='-₹'+discAmt.toLocaleString('en-IN');
    document.getElementById('savingsBox').style.display='block';
    document.getElementById('savingsAmt').textContent='₹'+discAmt.toLocaleString('en-IN');
  } else {
    discRow.style.display='none';
    document.getElementById('savingsBox').style.display='none';
  }
}
// small fix for color ref
const var_black='var(--black)';

// ── Qty Change ──
function changeQty(id, delta){
  const cart=getCart();
  const item=cart.find(i=>i.id===id);
  if(!item) return;
  item.qty+=delta;
  if(item.qty<=0){ removeItem(id); return; }
  if(item.qty>item.stock){ showToast('Only '+item.stock+' in stock!','error'); item.qty=item.stock; }
  saveCart(cart); renderCart();
}

// ── Remove ──
function removeItem(id){
  const cart=getCart().filter(i=>i.id!==id);
  saveCart(cart); renderCart();
  showToast('Item removed from cart');
}

// ── Coupon ──
function applyCoupon(){
  const code=document.getElementById('couponInput').value.trim().toUpperCase();
  const msgEl=document.getElementById('couponMsg');
  if(!code){ msgEl.style.display='block'; msgEl.style.color='#be123c'; msgEl.textContent='Please enter a coupon code.'; return; }
  if(COUPONS[code]){
    couponDiscount=COUPONS[code];
    couponCode=code;
    msgEl.style.display='block'; msgEl.style.color='#166534';
    msgEl.textContent=`Coupon "${code}" applied! ${couponDiscount}% off.`;
    showToast(couponDiscount+'% discount applied!');
    renderCart();
  } else {
    couponDiscount=0; couponCode='';
    msgEl.style.display='block'; msgEl.style.color='#be123c';
    msgEl.textContent='Invalid coupon code.';
  }
}

// ── Confirm Modal ──
function openConfirmModal(){
  const cart=getCart();
  if(cart.length===0) return;
  const subtotal=cart.reduce((s,i)=>s+(i.price*i.qty),0);
  const delivery=subtotal<499?49:0;
  const discAmt=couponDiscount>0?Math.round(subtotal*couponDiscount/100):0;
  const total=subtotal+delivery-discAmt;
  const user=getUser();

  document.getElementById('orderSummaryDetails').innerHTML=`
    <div class="order-detail-row"><span>Customer</span><strong>${user.name||'—'}</strong></div>
    <div class="order-detail-row"><span>Email</span><strong>${user.email||'—'}</strong></div>
    <div class="order-detail-row"><span>Items</span><strong>${cart.reduce((s,i)=>s+i.qty,0)} item(s)</strong></div>
    <div class="order-detail-row"><span>Subtotal</span><strong>₹${subtotal.toLocaleString('en-IN')}</strong></div>
    ${delivery>0?`<div class="order-detail-row"><span>Delivery</span><strong>₹${delivery}</strong></div>`:''}
    ${discAmt>0?`<div class="order-detail-row"><span>Discount (${couponCode})</span><strong style="color:#db2777">-₹${discAmt.toLocaleString('en-IN')}</strong></div>`:''}
    <div class="order-detail-row" style="border-top:2px solid var(--pink-mid);margin-top:6px;padding-top:10px">
      <span style="font-weight:700">Total Payable</span>
      <strong style="color:var(--pink-dark);font-size:1.05rem">₹${total.toLocaleString('en-IN')}</strong>
    </div>
  `;

  // mark step 2 active
  document.querySelectorAll('.step')[1].classList.remove('pending');
  document.querySelectorAll('.step')[1].classList.add('active');
  document.querySelectorAll('.step-line')[0].classList.add('done');

  document.getElementById('confirmModal').classList.add('open');
}
function closeConfirmModal(){
  document.getElementById('confirmModal').classList.remove('open');
  document.querySelectorAll('.step')[1].classList.remove('active');
  document.querySelectorAll('.step')[1].classList.add('pending');
  document.querySelectorAll('.step-line')[0].classList.remove('done');
}

// ── Place Order ──
function placeOrder(){
  const cart=getCart();
  const user=getUser();
  const subtotal=cart.reduce((s,i)=>s+(i.price*i.qty),0);
  const delivery=subtotal<499?49:0;
  const discAmt=couponDiscount>0?Math.round(subtotal*couponDiscount/100):0;
  const total=subtotal+delivery-discAmt;
  const orderId='DKW'+Date.now();

  const order={
    id:orderId,
    customerId:user.id,
    customerName:user.name,
    customerEmail:user.email,
    customerPhone:user.phone,
    items:cart.map(i=>({id:i.id,name:i.name,qty:i.qty,price:i.price,total:i.price*i.qty})),
    subtotal, delivery, discount:discAmt, coupon:couponCode,
    total, status:'Pending',
    date:new Date().toLocaleDateString('en-IN'),
    time:new Date().toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit'})
  };

  // save to global orders + customer orders
  const orders=getOrders();
  orders.push(order);
  saveOrders(orders);

  // update customer object with orders
  const customers=JSON.parse(localStorage.getItem('dkw_customers')||'[]');
  const ci=customers.findIndex(c=>c.id===user.id);
  if(ci>-1){
    if(!customers[ci].orders) customers[ci].orders=[];
    customers[ci].orders.push(order);
    localStorage.setItem('dkw_customers',JSON.stringify(customers));
    // update logged user too
    localStorage.setItem('dkw_loggedCustomer',JSON.stringify(customers[ci]));
  }

  // clear cart
  saveCart([]);

  // close confirm, show success
  document.getElementById('confirmModal').classList.remove('open');
  document.getElementById('successOrderId').textContent='Order #'+orderId;
  document.getElementById('successModal').classList.add('open');

  // mark step 3
  document.querySelectorAll('.step').forEach(s=>{s.classList.remove('pending','active');s.classList.add('done');});
  document.querySelectorAll('.step-line').forEach(l=>l.classList.add('done'));

  renderCart();
}

// ── Suggested Products ──
function loadSuggested(){
  const cart=getCart();
  const cartIds=cart.map(i=>i.id);
  const all=getProducts();
  const suggested=all.filter(p=>!cartIds.includes(p.id)&&p.stock>0).slice(-4).reverse();
  const card=document.getElementById('suggestedCard');
  const grid=document.getElementById('suggestedGrid');
  if(suggested.length===0||cart.length===0){ card.style.display='none'; return; }
  card.style.display='block';
  grid.innerHTML=suggested.map(p=>`
    <div style="border:1.5px solid var(--pink-mid);border-radius:12px;overflow:hidden;cursor:pointer;transition:all 0.2s" onmouseover="this.style.borderColor='var(--pink)'" onmouseout="this.style.borderColor='var(--pink-mid)'">
      <div style="background:var(--pink-light);aspect-ratio:4/3;overflow:hidden">
        ${p.image?`<img src="${p.image}" style="width:100%;height:100%;object-fit:cover" alt="${p.name}"/>`
        :`<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#db2777" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.4"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
          </div>`}
      </div>
      <div style="padding:10px">
        <div style="font-size:0.8rem;font-weight:700;color:var(--black);margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${p.name}</div>
        <div style="display:flex;justify-content:space-between;align-items:center">
          <span style="font-size:0.85rem;font-weight:800;color:var(--pink-dark)">₹${p.discountPrice||p.price}</span>
          <button onclick="quickAdd('${p.id}')" style="padding:4px 10px;background:var(--pink);color:var(--white);border:none;border-radius:6px;font-family:'Poppins',sans-serif;font-size:0.72rem;font-weight:700;cursor:pointer">+Add</button>
        </div>
      </div>
    </div>
  `).join('');
}

function quickAdd(id){
  const prod=getProducts().find(p=>p.id===id); if(!prod) return;
  const cart=getCart();
  const ex=cart.find(i=>i.id===id);
  if(ex){ ex.qty+=1; } else {
    cart.push({id:prod.id,name:prod.name,price:prod.discountPrice||prod.price,image:prod.image,category:prod.category,sizes:prod.sizes,qty:1,stock:prod.stock});
  }
  saveCart(cart);
  showToast(prod.name+' added!');
  renderCart();
}

// ── Profile ──
function loadProfile(){
  const user=getUser();
  if(user.name) document.getElementById('profileBtn').textContent=user.name.charAt(0).toUpperCase();
}

// ── Favicon ──
const icon=localStorage.getItem('dkw_siteIcon');
if(icon){
  let link=document.querySelector("link[rel~='icon']");
  if(!link){link=document.createElement('link');link.rel='icon';document.head.appendChild(link);}
  link.href=icon;
}

// ── Init ──
renderCart();
loadProfile();
</script>
</body>
</html>